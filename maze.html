<!DOCTYPE html>
<html lang="en">

<head>
    <title>Maze</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./maze.css">
    <link rel="stylesheet" type="text/css" href="./vote.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li class="active"><a class="game-logo" href="#">MazeGo!</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="https://www.facebook.com/sharer/sharer.php?
                    app_id=701373587232785&sdk=joey&u=http://127.0.0.1:8000
                    /&display=popup&ref=plugin&src=share_button"
                            onclick="return !window.open(this.href, 'Facebook', 'width=640,height=580')">
                            <span class="fa fa-facebook"></span>Share</a>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container text-center">
        <div class="row content">
            <div class="col-sm-8 text-left">
                <div id="maze_container">

                </div>
            </div>
            <div class="col-sm-4 sidenav">
                <div id="large-space"></div>
                <div id="button-div">
                    <a href="#" id="try-again" class="action-button shadow animate blue">Try Again</a>
                    <div id="space"></div>
                    <a href="#" id="new-game" class="action-button shadow animate blue">New Game</a>
                </div>

            </div>
        </div>
    </div>
    <div class="container rating_container">
        <span class="heading">User Rating</span>
        <span id="rating_button">
            <input type="radio" name="rating" value="1" class="fa fa-star" id="rate_1"></input>
            <input type="radio" name="rating" value="2" class="fa fa-star" id="rate_2"></input>
            <input type="radio" name="rating" value="3" class="fa fa-star" id="rate_3"></input>
            <input type="radio" name="rating" value="4" class="fa fa-star" id="rate_4"></input>
            <input type="radio" name="rating" value="5" class="fa fa-star" id="rate_5"></input>
        </span>
        <p>
        <div id="avg_star" style="display: inline"></div> average based on
        <div id="review_nos" style="display: inline"></div> reviews.</p>
        <hr style="border:3px solid #f1f1f1">

        <div class="row">
            <div class="side">
                <div>5 star</div>
            </div>
            <div class="middle">
                <div class="bar-container">
                    <div class="bar-5"></div>
                </div>
            </div>
            <div class="side right">
                <div id="no_rate_5">150</div>
            </div>
            <div class="side">
                <div>4 star</div>
            </div>
            <div class="middle">
                <div class="bar-container">
                    <div class="bar-4"></div>
                </div>
            </div>
            <div class="side right">
                <div id="no_rate_4">63</div>
            </div>
            <div class="side">
                <div>3 star</div>
            </div>
            <div class="middle">
                <div class="bar-container">
                    <div class="bar-3"></div>
                </div>
            </div>
            <div class="side right">
                <div id="no_rate_3">15</div>
            </div>
            <div class="side">
                <div>2 star</div>
            </div>
            <div class="middle">
                <div class="bar-container">
                    <div class="bar-2"></div>
                </div>
            </div>
            <div class="side right">
                <div id="no_rate_2">6</div>
            </div>
            <div class="side">
                <div>1 star</div>
            </div>
            <div class="middle">
                <div class="bar-container">
                    <div class="bar-1"></div>
                </div>
            </div>
            <div class="side right">
                <div id="no_rate_1">20</div>
            </div>
        </div>

    </div>
    <footer class="container-fluid">
        <div class="container">
            <div class="row">
                <div class="col-sm-4"></div>
                <div class="col-sm-4" style="text-align: center;">
                    <h3>About us</h3>
                    <p>1. Dao Dang Huy - 20176782</p>
                    <p>2. Nguyen Thi Hai Thanh - 20176871</p>
                </div>
            </div>
        </div>
    </footer>

</body>
<script src="./maze.js"></script>
<script src="./mazebuilder.js"></script>
<script>

    let Maze = new MazeBuilder(16, 12);
    Maze.placeKey();
    Maze.display("maze_container");

</script>
<script>
    window.addEventListener("DOMContentLoaded", function (e) {
        var maze = new Mazing("maze");
        console.log(maze.initHeroPos);
        var tryAgain = document.getElementById('try-again');

        tryAgain.addEventListener("click",tryAgainFunc);

        function tryAgainFunc(){
            maze.heroScore = maze.initScore;
            maze.setMessage("first find the key");

            maze.maze[maze.heroPos].classList.remove("hero");
            maze.mazeContainer.classList.remove("face-right");
            maze.heroPos = maze.initHeroPos;
            maze.maze[maze.initHeroPos].classList.add("hero");

            
            console.log(Maze.fr+"..."+Maze.fc);
            var keyPos = new Position(Maze.fr, Maze.fc);
            if(!maze.maze[keyPos].classList.contains("key")){
                maze.maze[keyPos].classList.add("key");
            };
            maze.mazeScore.classList.remove("has-key");
        };
  
        var newGame = document.getElementById('new-game');
        var maze_container = document.getElementById('maze_container');

        newGame.addEventListener("click",newGameFunc);

        function  newGameFunc(){
            while (maze_container.firstChild) {
                maze_container.removeChild(maze_container.lastChild);
            }
            Maze = new MazeBuilder(16, 12);
            Maze.placeKey();
            Maze.display("maze_container");
            maze = new Mazing("maze");
        }      

    }, false);
</script>
<script src="vote.js"></script>

</html>